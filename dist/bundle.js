(()=>{"use strict";var e,t,n,r,o,a,c,i,l={d:(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};l.d({},{B:()=>F});var u=Object.freeze({gain:.5,numSamples:256}),s=(new Uint8Array(u.numSamples/2),function(e){t.src=e}),d=function(t){t?(a.frequency.setValueAtTime(1e3,e.currentTime),a.gain.setValueAtTime(25,e.currentTime)):a.gain.setValueAtTime(0,e.currentTime)},f=function(t){t?(c.frequency.setValueAtTime(1e3,e.currentTime),c.gain.setValueAtTime(15,e.currentTime)):c.gain.setValueAtTime(0,e.currentTime)},h=function(e,t){e?(i.curve=null,i.curve=g(t)):i.curve=null},g=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=new Float32Array(256),n=0;n<256;++n){var r=2*n/256-1;t[n]=(Math.PI+e)*r/(Math.PI+e*Math.abs(r))}return t};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v,y,w,p,b,S,k,q,A=function(e,t){return Math.random()*(t-e)+e};function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F,I=[],R=function(e,t){v=e.getContext("2d"),y=e.width,w=e.height,p=function(e,t,n,r,o,a){var c,i=e.createLinearGradient(0,0,0,o),l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}([{percent:1,color:"#020024"},{percent:.65,color:"#090979"},{percent:0,color:"#00d4ff"}]);try{for(l.s();!(c=l.n()).done;){var u=c.value;i.addColorStop(u.percent,u.color)}}catch(e){l.e(e)}finally{l.f()}return i}(v,0,0,0,w),b=t,S=new Uint8Array(b.fftSize/2),C({x:0,y:0,image:"images/among-us-drip.jpg",width:200,height:200,rotate:0})},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=y/2,o=w/(t+1);v.save(),v.translate(r,o);var a,c=T(e);try{for(c.s();!(a=c.n()).done;){var i=a.value/255;i<.02&&(i=0),v.fillStyle="hsl(".concat((360*i+120)%360,", 90%, 85%)"),v.translate(t,0),v.rotate(2*Math.PI/e.length),v.save(),v.scale(1,n),v.fillRect(0,0,t,90*i),v.restore(),v.translate(4,0)}}catch(e){c.e(e)}finally{c.f()}v.restore()},C=function(){(k=new Sprite(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})).x=y/2-k.width/2,k.y=w-k.height,console.log("".concat(k.width))},E={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmbass:!1,useWaveForm:!1},j={useHighshelf:!1,useLowshelf:!1,useDistortion:!1,distortionAmount:20},D=function(n){var r=document.querySelector("#btn-fs"),a=document.querySelector("#btn-play");r.onclick=function(e){var t;console.log("goFullscreen() called"),(t=n).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},a.onclick=function(n){console.log("audioCtx.state before = ".concat(e.state)),"suspended"==e.state&&e.resume(),console.log("audioCtx.state after = ".concat(e.state)),"no"==n.target.dataset.playing?(t.play(),n.target.dataset.playing="yes"):(t.pause(),n.target.dataset.playing="no")};var c=document.querySelector("#volume-slider"),i=document.querySelector("#volume-label");c.oninput=function(e){var t;t=e.target.value,t=Number(t),o.gain.value=t,i.innerHTML=Math.round(e.target.value/2*100)},c.dispatchEvent(new Event("input")),document.querySelector("#track-select").onchange=function(e){var t=Number(e.target.value);console.log("".concat(F[t].background.image)),s(F[t].trackSrc),C(F[t].background),"yes"==a.dataset.playing&&a.dispatchEvent(new MouseEvent("click"))};var l=document.querySelector("#radio-freq"),u=document.querySelector("#radio-wave"),d=document.querySelector("#cb-gradient"),f=document.querySelector("#cb-bars"),h=document.querySelector("#cb-circles"),g=document.querySelector("#cb-noise"),m=document.querySelector("#cb-invert"),v=document.querySelector("#cb-embass");d.onclick=function(e){E.showGradient=e.target.checked},f.onclick=function(e){E.showBars=e.target.checked},h.onclick=function(e){E.showCircles=e.target.checked},g.onclick=function(e){E.showNoise=e.target.checked},m.onclick=function(e){E.showInvert=e.target.checked},v.onclick=function(e){E.showEmbass=e.target.checked},l.onchange=function(e){e.target.checked&&(E.useWaveForm=!1)},u.onchange=function(e){e.target.checked&&(E.useWaveForm=!0)},d.checked=E.showGradient,f.checked=E.showBars,h.checked=E.showCircles,g.checked=E.showNoise,m.checked=E.showInvert,v.checked=E.showEmbass,L()},L=function(){var e,t,n,r;(e=document.querySelector("#cb-highshelf")).checked=j.useHighshelf,(t=document.querySelector("#cb-lowshelf")).checked=j.useLowshelf,(n=document.querySelector("#cb-distortion")).checked=j.useDistortion,(r=document.querySelector("#slider-distortion")).value=j.distortionAmount,r.onchange=function(e){j.distortionAmount=Number(e.target.value),h(j.useDistortion,j.distortionAmount)},e.onchange=function(e){j.useHighshelf=e.target.checked,d(j.useHighshelf)},t.onchange=function(e){j.useLowshelf=e.target.checked,f(j.useLowshelf)},n.onchange=function(e){j.useDistortion=e.target.checked,h(j.useDistortion,j.distortionAmount)},d(),f()},O=function e(){setTimeout(e,1e3/60),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.useWaveForm?b.getByteTimeDomainData(S):b.getByteFrequencyData(S),v.save(),v.fillStyle="black",v.globalAlpha=.1,v.fillRect(0,0,y,w),v.restore(),e.showGradient&&(v.save(),v.fillStyle=p,v.globalAlpha=.3,v.fillRect(0,0,y,w),v.restore()),e.showCircles&&(x(S,5),x(S,3,-1)),I.length>0&&function(e){for(var t=0,n=I;t<n.length;t++){var r=n[t];r.draw(v),r.setScale(e[0]/255)}}(S),k.draw(v),e.showBars&&(function(e){var t=w/2;v.save(),v.translate(y/4-100,t+100),v.rotate(-90*Math.PI/180);var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,a=o/255;v.fillStyle="hsl(".concat((360*a+120)%360,", 100%, 35%)"),a<.02?a=.02:0==o&&(a=0),v.translate(3,0),v.rotate(Math.PI/e.length),v.save(),v.scale(1,1),v.fillRect(0,0,3,90*a),v.restore(),v.translate(4,0)}}catch(e){r.e(e)}finally{r.f()}v.restore()}(S),function(e){v.save(),v.translate(0,w);var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r/255;v.fillStyle="hsl(".concat((360*o+120)%360,", 100%, 80%)"),o<.02?o=.02:0==r&&(o=0),v.translate(10,0),v.save(),v.scale(1,-1),v.fillRect(0,0,10,90*o),v.restore(),v.translate(4,0)}}catch(e){n.e(e)}finally{n.f()}v.restore()}(S));for(var t=v.getImageData(0,0,y,w),n=t.data,r=n.length,o=t.width,a=0;a<r;a+=4)if(e.showNoise&&Math.random()<.05&&(n[a]=n[a+1]=n[a+2]=255),e.showInvert){var c=n[a],i=n[a+1],l=n[a+2];n[a]=255-c,n[a+1]=255-i,n[a+2]=255-l}if(e.showEmbass)for(var u=0;u<r;u++)u%4!=3&&(n[u]=127+2*n[u]-n[u+4]-n[u+4*o]);v.putImageData(t,0,0)}(E,undefined)};window.onload=function(){console.log("window.onload called"),B(N),function(){var l,d;l=window.AudioContext||window.webkitAudioContext,e=new l,t=new Audio,s("media/Among Us Drip Theme Song Original (Among Us Trap Remix  Amogus Meme Music).mp3"),n=e.createMediaElementSource(t),(r=e.createAnalyser()).fftSize=u.numSamples,(o=e.createGain()).gain.value=u.gain,(a=e.createBiquadFilter()).type="highshelf",(c=e.createBiquadFilter()).type="lowshelf",i=e.createWaveShaper(),n.connect(a),a.connect(c),c.connect(i),i.connect(r),r.connect(o),o.connect(e.destination),console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((d=function(){return A(35,220)})(),",").concat(d(),",").concat(d(),",1)")));var f=document.querySelector("canvas");D(f),R(f,r),O()}()};var B=function(e){var t=new XMLHttpRequest;t.onerror=function(e){return console.log("Failed to load...")},t.onload=function(t){return e(t.target.responseText)},t.open("GET","data/av-data.json"),t.send()},N=function(e){var t;try{t=JSON.parse(e)}catch(e){return void console.log("Parse failed...")}document.head.title=t.title;var n=t.title;document.querySelector("h1").innerHTML=n;var r="";F=t.trackList;for(var o=0;o<F.length;o++)r+='<option value="'.concat(o,'">').concat(F[o].trackName,"</option>");document.querySelector("#track-select").innerHTML=r;var a=new Sprite(t.star);q=a,function(){for(var e=y/10,t=0;t<10;t++){var n=new Sprite({x:0,y:0,image:q.image.src,width:q.width,height:q.height});n.x=t*e+A(10,50),n.y+=A(10,50),t%2==0&&(n.y=50+A(10,50)),I.push(n)}}()}})();